<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0"> 
    <meta name="description" content="Comando while"/>
    <title>Comando while</title>
    <link rel="stylesheet" type="text/css" href="../../style.css" media="screen">
</head>

<body>

<nav>
    <ul>
        <li> <a class="navbar" href="../../index.php">Home</a></li>
        <li> <a class="navbar" href="../../documentation.html">Documentation</a></li>
    </ul>
</nav>
      
<div class="content">

<h1>Comando while</h1>

<p>The while command allows you to define a command to test and then loop through a
set of commands for as long as the defi ned test command returns a zero exit status. It tests the test command at the start of each iteration. When the test command returns a non-zero exit status, the while command stops executing the set of commands.
Here’s fhe format of the while command:</p>

<pre>
while test command
do
    other commands
done
</pre>

<p>The test command defi ned in the while command is the exact same format as in if-then statements (see Chapter 12). As in the if-then statement, you can use any normal bash shell command, or you can use the test command to test for conditions, such as variable values.</p>

<p>The key to the while command is that the exit status of the test command specifi ed
must change, based on the commands run during the loop. If the exit status never changes, the while loop will get stuck in an infinite loop.</p>

<pre>
var1=10
while [ $var1 -gt 0 ]
do
    echo $var1
    var1=$[ $var1 - 1 ]
done
</pre>

<h2>Infinite loops</h2>

<p>An infinite loop is nothing but a sequence of instructions which loops endlessly, either due to the loop having no terminating condition, having one that can never be met, or one that causes the loop to start over. The syntax is as follows using the while loop:</p>

<pre>
#!/bin/bash
while :
do
	echo "Press [CTRL+C] to stop.."
	sleep 1
done
</pre>

<p>This is a loop that will forever print “Press [CTRL+C] to stop..”. Please note that : is the null command. The null command does nothing and its exit status is always set to true. You can modify the above as follows to improve the readability:</p>

<pre>
#!/bin/bash
while true
do
	echo "Press [CTRL+C] to stop.."
	sleep 1
done
</pre>

<p>A single-line bash infinite while loop syntax is as follows:</p>

<pre>while :; do echo 'Hit CTRL+C'; sleep 1; done</pre>

<o>OR</p>

 <pre>while true; do echo 'Hit CTRL+C'; sleep 1; done</pre>

<p>Bash for infinite loop example</p>


<h3>How Do I Escape the Loop?</h3>

<p>A <code>while</code> or while loop may be escaped with a break statement when certain condition is satisfied:</p>

</pre>
 ### while loop example ###
while :
do
   echo "Pres CTRL+C to stop..."
   sleep 1
   if (disaster-condition)
   then
	break       	   #Abandon the loop.
   fi
done
</pre>

<p>You can also use the case statement to esacpe with a break statement:</p>

<pre>
while :
do 
     ### add some input and output here ###
     case $var in
       yes) do something ;;
       no) do something ;;
       quit) break ;;        ##Abandon the loop.
     ease
done
</pre>

<h3>Example</h3>

<p>A sample shell script to demonstrate the actual usage of an infinite loop and the break statement:</p>

<pre>
#!/bin/bash
# Purpose: Display various options to operator using menus
# Author: Vivek Gite < vivek @ nixcraft . com > under GPL v2.0+
# ---------------------------------------------------------------------------
# capture CTRL+C, CTRL+Z and quit singles using the trap
trap '' SIGINT
trap ''  SIGQUIT
trap '' SIGTSTP
 
# display message and pause 
pause(){
	local m="$@"
	echo "$m"
	read -p "Press [Enter] key to continue..." key
}
 
# set an 
while :
do
	# show menu
	clear
	echo "---------------------------------"
	echo "	     M A I N - M E N U"
	echo "---------------------------------"
	echo "1. Show current date/time"
	echo "2. Show what users are doing"
	echo "3. Show top memory & cpu eating process"
	echo "4. Show network stats"
	echo "5. Exit"
	echo "---------------------------------"
	read -r -p "Enter your choice [1-5] : " c
	# take action
	case $c in
		1) pause "$(date)";;
		2) w| less;;
		3) echo '*** Top 10 Memory eating process:'; ps -auxf | sort -nr -k 4 | head -10; 
		   echo; echo '*** Top 10 CPU eating process:';ps -auxf | sort -nr -k 3 | head -10; 
		   echo;  pause;;
		4) netstat -s | less;;
		5) break;;
		*) Pause "Select between 1 to 5 only"
	esac
done
</pre>

<section>
<a href="system.html">&#171;Thermodynamic Systems</a>
<a href="index.html">Index</a>
<a href="seriesegnovar.html">Serie a termini di segno variabile&#187;</a>
</section>

</div>

</body>
</html>
