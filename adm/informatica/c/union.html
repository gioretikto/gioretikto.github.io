<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta name="description" content="Union"/>
	<title>Union</title>
	<link rel="stylesheet" type="text/css" href="../../style.css" media="screen">
</head>

<body>

<nav>
	<ul>
		<li><a class="navbar" href="../../index.html">Home</a></li>
		<li><a class="navbar" href="index.html">Index</a></li>
	</ul>
</nav>

<article>

<h1>Union</h1>

<p>A <i>union</i> is a type that enables you to store different data types in the same memory space (<b>but not simultaneously</b>). A typical use is a table designed to hold a mixture of types in some order that is neither regular nor known in advance. By using an array of unions, you can create an array of equal-sized units, each of which can hold a variety of data types.</p>

<p>Unions are set up in much the same way as structures. There is a union template and a union variable. They can be defined in one step or, by using a union tag, in two. Here is an example of a union template with a tag:</p>

<pre>
union hold {
	int digit;
	double bigfl;
	char letter;
};
</pre>

<p>Here is an example of defining three union variables of the hold type:</p>

<pre>
union hold fit; // union variable of hold type
union hold save[10]; // array of 10 union variables
union hold * pu; // pointer to a variable of hold type
</pre>

<p>Here is how you can use a union:</p>

<pre>
fit.digit = 23; // 23 is stored in fit; 2 bytes used
fit.bigfl = 2.0; // 23 cleared, 2.0 stored; 8 bytes used
fit.letter = 'h'; // 2.0 cleared, h stored; 1 byte used
</pre>

<p>You can use the -> operator with pointers to unions in the same fashion that you use the operator with pointers to structures:</p>

<pre>
pu = &fit;
x = pu->digit; // same as x = fit.digit
</pre>

<p>A union is essentially a structure in which all of the fields overlay each other;</p>

<figure>
<img src="img/union.png" alt="union"/>
<figcaption>A program illustrating that all the members of a union object start from the same memory location</figcaption>
</figure>

<h2>Difference between Structure &amp; Union </h2>

<p>A structure with a similar declaration would be able to hold an int value and a double value and a char value. This union, however, can hold an int value or a double value or a char value.</p>

<p>In structure each member get separate space in memory. Take below example.</p>

<pre>struct student { int rollno; char gender; float marks; }s1;</pre>

<p>The total memory required to store a structure variable is equal to the sum of size of all the members. In above case 7 bytes (2+1+4) will be required to store structure variable s1.</p>

<p>In union, the total memory space allocated is equal to the member with largest size. All other members share the same memory space. This is the biggest difference between structure and union.</p>

<pre>union student { int rollno; char gender; float marks; }s1;</pre>

<p>In above example variable marks is of float type and have largest size (4 bytes). So the total memory required to store union variable s1 is 4 bytes.</p>

<p>We can access any member in any sequence.</p>

<pre>s1.rollno = 20; s1.marks = 90.0; printf("%d",s1.rollno);</pre>

<p>The above code will work fine but will show erroneous output in the case of union. We can access only that variable whose value is recently stored.</p>

<pre>
s1.rollno = 20;
s1.marks = 90.0;
printf("%d", s1.rollno);
</pre>

<p>The above code will show erroneous output. The value of rollno is lost as most recently we have stored value in marks. This is because all the members share same memory space.</p>

<p>All the members can be initialized while declaring the variable of structure. Only first member can be initialized while declaring the variable of union.</p>
 
<p>Using a designated initializer in the same example, the following initializes the second union member age:</p>

<pre>
union {
      char birthday[9];
      int age;
      float weight;
      } people = { .age = 14 };
</pre>

<p>Using C89-style initialization, the following example shows how you would initialize the first union member birthday of the union variable people:</p>

<pre>
union {
      char birthday[9];
      int age;
      float weight;
      } people = {"23⁄07⁄57"};
</pre>

<section aria-label="End">
<a href="system.html">&#171;Thermodynamic Systems</a>
<a href="index.html">Index</a>
<a href="makefile.html">Makefile &#187;</a>
</section>

</article>

</body>
</html>
