<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0"> 
    <meta name="description" content="GtkImage"/>
    <title>GtkImage</title>
    <link rel="stylesheet" type="text/css" href="../../style.css" media="screen">
</head>

<body>

<nav>
    <ul>
        <li><a class="navbar" href="../../index.php">Home</a></li>
        <li><a class="navbar" href="../../documentation.html">Documentation</a></li>
    </ul>
</nav>
      
<div class="content">

<h1>GtkImage</h1>

<p>The GtkImage widget displays an image. Various kinds of object can be displayed as an image; most typically, you would load a GdkPixbuf ("pixel buffer") from a file, and then display that. There’s a convenience function to do this, <code>gtk_image_new_from_file()</code>, used as follows:</p>

<pre>
GtkWidget *image;
image = gtk_image_new_from_file ("myfile.png");
</pre>

<p>If the file isn’t loaded successfully, the image will contain a “broken image” icon similar to that used in many web browsers. If you want to handle errors in loading the file yourself, for example by displaying an error message, then load the image with <code>gdk_pixbuf_new_from_file()</code>, then create the <code>GtkImage with gtk_image_new_from_pixbuf()</code>.</p>

<p>The image file may contain an animation, if so the GtkImage will display an animation (GdkPixbufAnimation) instead of a static image.</p>

<p>GtkImage is a subclass of GtkMisc, which implies that you can align it (center, left, right) and add padding to it, using GtkMisc methods.</p>

<p>GtkImage is a “no window” widget (has no GdkWindow of its own), so by default does not receive events. If you want to receive events on the image, such as button clicks, place the image inside a GtkEventBox, then connect to the event signals on the event box.</p>

<pre>
#include &lt;gtk/gtk.h&gt;

static gboolean button_press_callback (GtkWidget *event_box, GdkEventButton *event, gpointer data)
{
  g_print ("Event box clicked at coordinates %f,%f\n",
           event->x, event->y);

  // Returning TRUE means we handled the event, so the signal
  // emission should be stopped (don’t call any further callbacks
  // that may be connected). Return FALSE to continue invoking callbacks.
  return TRUE;
}

static GtkWidget* create_image (GtkWidget *window)
{
  GtkWidget *image;
  GtkWidget *event_box;
  event_box = gtk_event_box_new ();
  
  gtk_container_add (GTK_CONTAINER (window), event_box);

  image = gtk_image_new_from_file ("carte/bastoni/1.png");

  gtk_container_add (GTK_CONTAINER (event_box), image);

  g_signal_connect (G_OBJECT (event_box),
                    "button_press_event",
                    G_CALLBACK (button_press_callback),
                    image);

  return image;
}

int main (int argc,
char *argv[])
{
	GtkWidget *window;
	gtk_init (&argc, &argv);
	
	window = gtk_window_new (GTK_WINDOW_TOPLEVEL);
	gtk_window_set_title (GTK_WINDOW (window), "Event Box example");
	gtk_container_set_border_width (GTK_CONTAINER (window), 10);
	gtk_widget_set_size_request (window, 200, 100);

	create_image(window);
	
	gtk_widget_show_all (window);
	gtk_main ();
	return 0;
}
</pre>

<p>When handling events on the event box, keep in mind that coordinates in the image may be different from event box coordinates due to the alignment and padding settings on the image (see GtkMisc). The simplest way to solve this is to set the alignment to 0.0 (left/top), and set the padding to zero. Then the origin of the image will be the same as the origin of the event box.</p>

<p>Sometimes an application will want to avoid depending on external data files, such as image files. GTK+ comes with a program to avoid this, called “gdk-pixbuf-csource”. This library allows you to convert an image into a C variable declaration, which can then be loaded into a GdkPixbuf using gdk_pixbuf_new_from_inline().</p>

<section>
<a href="system.html">&#171;Thermodynamic Systems</a>
<a href="index.html">Index</a>
<a href="hello_world.html">Hello World &#187;</a>
</section>

</div>

</body>
</html>
