<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0"> 
    <meta name="description" content="Cairo Examples"/>
    <title>Cairo Examples</title>
    <link rel="stylesheet" type="text/css" href="../../style.css" media="screen">
</head>

<body>

<nav>
    <ul>
        <li><a class="navbar" href="../../index.php">Home</a></li>
        <li><a class="navbar" href="../../documentation.html">Documentation</a></li>
    </ul>
</nav>
      
<div class="content">

<h1>Cairo Examples</h1>

<p>In this chapter of the Cairo Examples tutorial, we have given some basic definitions.</p>

<h2>PNG image</h2>

<h3>Creare uno immagine png</h3>

<p>Creiamo un'immagine png con cairo</p>

<pre>
#include &lt;gtk/gtk.h&gt;

int main(void)
{
  cairo_surface_t *surface;
  cairo_t *cr;

  surface = cairo_image_surface_create(CAIRO_FORMAT_ARGB32, 390, 60);
  cr = cairo_create(surface);

  cairo_set_source_rgb(cr, 0, 0, 0);
  cairo_select_font_face(cr, "Sans", CAIRO_FONT_SLANT_NORMAL,
      CAIRO_FONT_WEIGHT_NORMAL);
  cairo_set_font_size(cr, 40.0);

  cairo_move_to(cr, 10.0, 50.0);
  cairo_show_text(cr, "Disziplin ist Macht.");

  cairo_surface_write_to_png(surface, "image.png");

  cairo_destroy(cr);
  cairo_surface_destroy(surface);

  return 0;
}
</pre>

<p>Here we declare a surface and a Cairo context.</p>

<pre>
surface = cairo_image_surface_create(CAIRO_FORMAT_ARGB32, 390, 60);
cr = cairo_create(surface);
</pre>

<p>We create a surface and a Cairo context. The surface is an 390x60 px image.</p>

<pre>cairo_set_source_rgb(cr, 0, 0, 0);</pre>

<p>Il prototipo di questa funzione Ã¨</p>

<pre>void
cairo_set_source_rgb (cairo_t *cr,
                      double red,
                      double green,
                      double blue);
</pre>

<p>Sets the source pattern within cr to an opaque color. This opaque color will then be used for any subsequent drawing operation until a new source pattern is set. The color components are floating point numbers in the range 0 to 1. If the values passed in are outside that range, they will be clamped.
The default source pattern is opaque black, (that is, it is equivalent to cairo_set_source_rgb(cr, 0.0, 0.0, 0.0)).</p>

<p>We will draw in black ink.</p>

<pre>cairo_select_font_face(cr, "Sans", CAIRO_FONT_SLANT_NORMAL,
    CAIRO_FONT_WEIGHT_NORMAL);
cairo_set_font_size(cr, 40.0);</pre>

<p>We choose a font type and set its size.</p>

<pre>cairo_move_to(cr, 10.0, 50.0);
cairo_show_text(cr, "Disziplin ist Macht.");</pre>

<p>We move to a (10.0, 50.0) position within the image and draw the text.</p>

<pre>cairo_surface_write_to_png(surface, "image.png");</pre>

<p>This function call creates the PNG image.</p>

<pre>cairo_destroy(cr);
cairo_surface_destroy(surface);</pre>

<p>In the end, we clean the resources.</p>

<h2>Caricare un'immagine png</h2>

<p>Per disegnare un'immagige proveniente da un file .png sullo schermo</p>

<pre>
#include &lt;gtk/gtk.h&gt;

struct {
  cairo_surface_t *image;  
} glob;

static void do_drawing(cairo_t *);

static gboolean on_draw_event(GtkWidget *widget, cairo_t *cr, 
    gpointer user_data)
{      
  do_drawing(cr);

  return FALSE;
}

static void do_drawing(cairo_t *cr)
{
  cairo_set_source_surface(cr, glob.image, 10, 10);
  cairo_paint(cr);    
}

int main(int argc, char *argv[])
{
  GtkWidget *window;
  GtkWidget *darea;
  
  glob.image = cairo_image_surface_create_from_png("resized_cards/back.png");

  gtk_init(&argc, &argv);

  window = gtk_window_new(GTK_WINDOW_TOPLEVEL);

  darea = gtk_drawing_area_new();
  gtk_container_add(GTK_CONTAINER (window), darea);

  g_signal_connect(G_OBJECT(darea), "draw", 
      G_CALLBACK(on_draw_event), NULL); 
  g_signal_connect(window, "destroy",
      G_CALLBACK (gtk_main_quit), NULL);

  gtk_window_set_position(GTK_WINDOW(window), GTK_WIN_POS_CENTER);
  gtk_window_set_default_size(GTK_WINDOW(window), 300, 220); 
  gtk_window_set_title(GTK_WINDOW(window), "Image");

  gtk_widget_show_all(window);

  gtk_main();

  cairo_surface_destroy(glob.image);

  return 0;
}
</pre>

<h2>PDF file</h2>

<p>In the second example, we will use the Cairo library to create a simple PDF file. </p>

<pre>
#include &lt;gtk/gtk.h&gt;
#include &lt;cairo-pdf.h&gt;

int main(void) 
{
  cairo_surface_t *surface;
  cairo_t *cr;

  surface = cairo_pdf_surface_create("pdffile.pdf", 504, 648);
  cr = cairo_create(surface);

  cairo_set_source_rgb(cr, 0, 0, 0);
  cairo_select_font_face (cr, "Sans", CAIRO_FONT_SLANT_NORMAL,
      CAIRO_FONT_WEIGHT_NORMAL);
  cairo_set_font_size (cr, 40.0);

  cairo_move_to(cr, 10.0, 50.0);
  cairo_show_text(cr, "Disziplin ist Macht.");

  cairo_show_page(cr);

  cairo_surface_destroy(surface);
  cairo_destroy(cr);

  return 0;
}
</pre>

<p>To render a PDF file, we must create a PDF surface using the cairo_pdf_surface_create() function call. The size of the PDF file is specified in points, which is a standard in typesetting.</p>

<pre>cairo_show_page(cr);</pre>

<p>The cairo_show_page() finishes rendering of the PDF file. </p>

<h2>SVG file</h2>

<p>The next example creates a simple SVG (Scalable Vector Graphics) file. The SVG is one of the hottest technologies these days. </p>

<pre>
#include &lt;gtk/gtk.h&gt;
#include &lt;cairo-svg.h&gt; 
 
int main(void) 
{
  cairo_surface_t *surface;
  cairo_t *cr;

  surface = cairo_svg_surface_create("svgfile.svg", 390, 60);
  cr = cairo_create(surface);

  cairo_set_source_rgb(cr, 0, 0, 0);
  cairo_select_font_face(cr, "Sans", CAIRO_FONT_SLANT_NORMAL,
      CAIRO_FONT_WEIGHT_NORMAL);
  cairo_set_font_size(cr, 40.0);

  cairo_move_to(cr, 10.0, 50.0);
  cairo_show_text(cr, "Disziplin ist Macht.");

  cairo_surface_destroy(surface);
  cairo_destroy(cr);

  return 0;
}
</pre>

<p>We can use Firefox to open the svgfile.svg file. </p>

<h2>GTK Window</h2>

<p>In these examples, we will draw on the GTK window. This backend will be used throughout the rest of the tutorial. </p>

<pre>
#include &lt;gtk/gtk.h&gt;

static void do_drawing(cairo_t *);

static gboolean on_draw_event(GtkWidget *widget, cairo_t *cr, 
    gpointer user_data)
{      
  do_drawing(cr);

  return FALSE;
}

static void do_drawing(cairo_t *cr)
{
  cairo_set_source_rgb(cr, 0, 0, 0);
  cairo_select_font_face(cr, "Sans", CAIRO_FONT_SLANT_NORMAL,
      CAIRO_FONT_WEIGHT_NORMAL);
  cairo_set_font_size(cr, 40.0);

  cairo_move_to(cr, 10.0, 50.0);
  cairo_show_text(cr, "Disziplin ist Macht.");    
}


int main(int argc, char *argv[])
{
  GtkWidget *window;
  GtkWidget *darea;

  gtk_init(&argc, &argv);

  window = gtk_window_new(GTK_WINDOW_TOPLEVEL);

  darea = gtk_drawing_area_new();
  gtk_container_add(GTK_CONTAINER(window), darea);

  g_signal_connect(G_OBJECT(darea), "draw", 
      G_CALLBACK(on_draw_event), NULL); 
  g_signal_connect(window, "destroy",
      G_CALLBACK(gtk_main_quit), NULL);

  gtk_window_set_position(GTK_WINDOW(window), GTK_WIN_POS_CENTER);
  gtk_window_set_default_size(GTK_WINDOW(window), 400, 90); 
  gtk_window_set_title(GTK_WINDOW(window), "GTK window");

  gtk_widget_show_all(window);

  gtk_main();

  return 0;
}
</pre>

<p>We delegate the actual drawing to the <code>do_drawing()</code> function. The parameter sent is the Cairo context. </p>

<p>We create a GtkDrawingArea widget and add it to the container window. It is used for custom drawing. When the GtkDrawingArea widget needs to be redrawn, it emits the draw signal. We connect that signal to the on_draw_event() callback. </p>

<pre>
g_signal_connect(G_OBJECT(darea), "draw", 
    G_CALLBACK(on_draw_event), NULL);</pre>

<section>
<a href="cairo_drawing.html">&#171;Basic drawing in Cairo</a>
<a href="index.html">Index</a>
<a href="hello_world.html">Hello World &#187;</a>
</section>

</div>

</body>
</html>
