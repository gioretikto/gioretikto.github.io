<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0"> 
    <meta name="description" content="fdisk"/>

    <title>fdisk</title>

    <link rel="stylesheet" type="text/css" href="../../style.css" media="screen">
</head>

<body>

<nav>
    <ul>
        <li> <a class="navbar" href="../../index.php">Home</a></li>
        <li> <a class="navbar" href="../../documentation.html">Documentation</a></li>
    </ul>
</nav>
            
<div class="content">

<h1>fdisk: Creating Partitions</h1>

<p>To start out, you need to create a partition on the storage device to contain the filesystem. The partition can be an entire disk or a subset of a disk that contains a portion of the virtual directory.</p>


<p>The <b>fdisk</b> utility is used to help you organize partitions on any storage device installed on the system. The <i>fdisk</i> command is an interactive program that allows you to enter commands to walk through the steps of partitioning a hard drive. To start the fdisk command, you need to specify the device name of the storage device you want to partition and you need to have superuser privileges.</p>

<pre>$ sudo fdisk /dev/sdb</pre>

<p>For starters, you can display the details of a storage device using the <b>p</b> command:
Command (<b>m</b> for help): <b>p</b></p>


<p>To delete partitions use the <b>d</b> command. Next, you’ll want to create a new partition on the storage device. Use the <b>n</b> command for that.</p>

<p>You can repeat the process to allocate the remaining space on the storage device to another
Linux partition. After you’ve created the partitions you want, use the <b>w</b> command to save
the changes to the storage device.</p>

<h2>Partitions</h2>

<p>A <i>partition</i>, is a logical section of a hard disk that has a device name such as <i>/dev/sda1</i>. Before most programs can write to a partition, a <i>data structure</i> called a <i>filesystem</i>, needs to be written to the partition. This data structure holds <i>inodes</i> that map locations on the disk thta store files to the names of the files.</p>

<h3>Primary, Extended and logical partitions</h3>

<p>Linux supports several different partitioning formats, but by deafult it uses the MS-DOS format. The MS-DOS partition table, allows for up to four <i>primary partitions</i>. One of these four primary partitions can be replaced with an <i>extended partition</i>, which can contain up to 12 <i>logical partitions</i>, for a total of 15 possible usable partitions (16 if you count the extended partition "container" but it is not usable for data). If you want more than four partitions on a drive- and you frequently do-you must set up and extended partition. An extended partition may then contain many more sub-partitions called logical drives. A typical disk is divided into three primary partitions (frequently numbered 1, 2 and 3) and one extended partition (frequently numbered 4).</p>

<h4>Primary partitions</h4>

<p>This type of partition contains a filesystem. If all four primary partitions exists on an SCSI driver, they are numbered as follows:</p>

<ul>
    <li><p>/dev/sda1</p></li>
    <li><p>/dev/sda2</p></li>
    <li><p>/dev/sda3</p></li>
    <li><p>/dev/sda4</p></li>
</ul>

<p>One of these <i>primary partition</i> must be marked as "active" and typically includes a bootloader, such as (GRUB). The PC BIOS will be able to select it for boot.</p>

<h4>Extended partitions</h4>

<p>An extended partition is a variant of the primary partition but cannot contain a filesystem. Instead, it contains <i>logical partitions</i>. Only one extended partition may exist on a single physical disk. For example, the partitions on a disk with one primary partition and the sole extended partition might be numbered as follows:</p>

<ul>
    <li><p>/dev/sda1 (primary)</p></li>
    <li><p>/dev/sda2 (extended)</p></li>
</ul>

<h4>Logical partitions</h4>

<p>Logical partitions exist <i>whitin</i> the extended partition. Logical partitions are numbered from 5 to 16. The partitions on a disk with one primary partision, one extended partition, and four logical partitions might be numbered as follows:</p>

<ul>
    <li><p>/dev/sda1 (primary)</p></li>
    <li><p>/dev/sda2 (extended)</p></li>
    <li><p>/dev/sda5 (logical)</p></li>
    <li><p>/dev/sda6 (logical)</p></li>
    <li><p>/dev/sda7 (logical)</p></li>
    <li><p>/dev/sda8 (logical)</p></li>
</ul>



<h2>Creating a filesystem</h2>


<p>Before you can store data on the partition, you must format it with a filesystem so Linux can use it. Each filesystem type uses its own command line program to format partitions. The Table below lists the utilities used for the different filesystems discussed in this chapter.</p>


<table>

<th>Utility</th> <th>Purpose</th>
<tr><td>mkefs</td> <td>Creates an ext filesystem</td></tr>

<tr><td>mke2fs</td>  <td>Creates an ext2 filesystem</td></tr>

<tr><td>mkfs.ext3</td> <td>Creates an ext3 filesystem</td></tr>

<tr><td>mkfs.ext4</td>  <td>Creates an ext4 filesystem</td></tr>

<tr><td>mkreiserfs</td>  <td>Creates a ReiserFS filesystem</td></tr>

<tr><td>jfs_mkfs</td>  <td>Creates a JFS filesystem</td></tr>

<tr><td>mkfs.xfs</td>  <td>Creates an XFS filesystem</td></tr>

<tr><td>mkfs.zfs</td>  <td>Creates a ZFS filesystem</td></tr>

<tr><td>mkfs.btrfs</td> <td>Creates a Btrfs filesystem</td></tr>


</table>


<p>If you’re not sure which Linux file system to use, there’s a simple answer.
The Quick Answer: Use Ext4 if You’re Not Sure.</p>

<pre>$ sudo mkfs.ext4 /dev/sdb1</pre>

<p>Ext4 is the default file system on most Linux distributions for a reason. It’s an improved version of the older Ext3 file system. It’s not the most cutting-edge file system, but that’s good: It means Ext4 is rock-solid and stable.</p>

<p>In the future, Linux distributions will gradually shift towards BtrFS. BtrFS is still cutting edge and seeing a lot of development, so you’ll want to avoid it on production systems. The risk of data corruption or other problems isn’t worth the potential improvement in speed.</p>

<h3>What Is Journaling?</h2>

<p>One thing you’ll notice when choosing between file systems is that some of them are marked as a “journaling” file system and some aren’t. This is important.</p>

<p>Journaling is designed to prevent data corruption from crashes and sudden power loss. Let’s say your system is partway through writing a file to the disk and it suddenly loses power. Without a journal, your computer would have no idea if the file was completely written to disk. The file would remain there on disk, corrupt.</p>

<p>With a journal, your computer would note that it was going to write a certain file to disk in the journal, write that file to disk, and then remove that job from the journal. If the power went out partway through writing the file, Linux would check the file system’s journal when it boots up and resume any partially completed jobs. This prevents data loss and file corruption.</p>

<p>What’s the Difference Between All Those Linux File Systems?

<p>While Microsoft develops Windows and Apple controls macOS, Linux is an open-source project developed by the community. Anyone (or any company) with the skill and time can create a new Linux file system. That’s one reason why there are so many options. Here are the differences:</p>

<ul>

<li><p><b>Ext</b> stands for “Extended file system”, and was the first created specifically for Linux. It’s had four major revisions. “Ext” is the first version of the file system, introduced in 1992. It was a major upgrade from the Minix file system used at the time, but lacks important features. Many Linux distributions no longer support Ext.</p></li>

<li><p><b>Ext2</b> is not a journaling file system. When introduced, it was the first file system to support extended file attributes and 2 terabyte drives. Ext2’s lack of a journal means it writes to disk less, which makes it useful for flash memory like USB drives. However, file systems like exFAT and FAT32 also don’t use journaling and are more compatible with different operating systems, so we recommend you avoid Ext2 unless you know you need it for some reason.</p></li>

<li><p><b>Ext3</b> is basically just Ext2 with journaling. Ext3 was designed to be backwards compatible with Ext2, allowing partitions to be converted between Ext2 and Ext3 without any formatting required. It’s been around longer than Ext4, but Ext4 has been around since 2008 and is widely tested. At this point, you’re better off using Ext4.</p></li>

<li><p><b>Ext4</b> was also designed to be backwards compatible. You can mount an Ext4 file system as Ext3, or mount an Ext2 or Ext3 file system as Ext4. It includes newer features that reduce file fragmentation, allows for larger volumes and files, and uses delayed allocation to improve flash memory life. This is the most modern version of the Ext file system and is the default on most Linux distributions.</p></li>

<li><p><b>BtrFS</b>, pronounced “Butter” or “Better” FS, was originally designed by Oracle. It stands for “B-Tree File System” and allows for drive pooling, on the fly snapshots, transparent compression, and online defragmentation. It shares a number of the same ideas found in ReiserFS, a file system some Linux distributions used to use by default. BtrFS is designed to be a clean break from the Ext series of file sytstems. Ted Ts’o, the maintainer of the Ext4 file system, considers Ext4 a short-term solution and believes BtrFS is the way forward. Expect to see BtrFS become the default in both enterprise server and consumer desktop Linux distributions in the next few years as it’s further tested.</p></li>

<li><p><b>ReiserFS</b> was a big leap forward for Linux file systems when it was introduced in 2001 and it included many new features Ext would never be able to implement. ReiserFS was replaced by Reiser4, which improved on many of the features that were incomplete or lacking in the initial release, in 2004. But Reiser4 development stalled after the main developer, Hans Reiser, was sent to prison in 2008. Reiser4 still isn’t in the main Linux kernel and is unlikely to get there. BtrFS is the better long-term choice.</p></li>

<li><p><b>ZFS</b> was designed by Sun Microsystems for Solaris and is now owned by Oracle. ZFS supports a lot of advanced features including drive pooling, snapshots, and dynamic disk striping—BtrFS will bring many of these features to Linux by default. Each file has a checksum, so ZFS can tell if a file is corrupted or not. Sun open-sourced ZFS under the Sun CDDL license, which means it can’t be included in the Linux kernel. However, you can install ZFS support on any Linux distribution. Ubuntu now offers official ZFS support starting with Ubuntu 16.04, too. Ubuntu uses ZFS by default for containers.</p></li>

<li><p><b>XFS</b> was developed by Silicon Graphics in 1994 for the SGI IRX operating system, and was ported to Linux in 2001. It’s similar to Ext4 in some ways, as it also uses delayed allocation to help with file fragmentation and does not allow for mounted snapshots. It can be enlarged, but not shrunk, on the fly. XFS has good performance when dealing with large files, but has worse performance than other file systems when dealing with many small files. It may be useful for certain types of servers that primarily need to deal with large files.</p></li>

<li><p><b>JFS</b>, or “Journaled File System”, was developed by IBM for the IBM AIX operating system in 1990 and later ported to Linux. It boasts low CPU usage and good performance for both large and small files. JFS partitions can be dynamically resized, but not shrunk. It was extremely well planned and has support in most every major distribution, however its production testing on Linux servers isn’t as extensive as Ext, as it was designed for AIX. Ext4 is more commonly used and is more widely tested.</p></li>
    
<li><p><b>Swap</b> is an option when formatting a drive, but isn’t an actual file system. It’s used as virtual memory and doesn’t have a file system structure. You can’t mount it to view its contents. Swap is used as “scratch space” by the Linux kernel to temporarily store data that can’t fit in RAM. It’s also used for hibernating. While Windows stores its paging file as a file on its main system partition, Linux just reserves a separate empty partition for swap space.</p></li>


<li><p><b>FAT16, FAT32</b>, and <b>exFAT</b>: Microsoft’s FAT file systems are often an option when formatting a drive in Linux. These file systems don’t include a journal, so they’re ideal for external USB drives. They’re a de facto standard that every operating system—Windows, macOS, Linux, and other devices—can read. This makes them the ideal file system to use when formatting an external drive you’ll want to use with other operating systems. FAT32 is older. exFAT is the ideal option, as it supports files over 4 GB in size and partitions over 8 TB in size, unlike FAT32.</p></li>

</ul>

<div class="parent">
<div class="child"><a href="integrale.html">&#171;Definizione dell'integrale</a></p></div>
<div class="child"><a href="index.html">Indice</a></div>
<div class="child"><a href="loopdevice.html">Loop Device&#187;</a></p></div>
</div>

</div>

</body>
</html>
