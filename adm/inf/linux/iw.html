<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0"> 
    <meta name="description" content="iw"/>
    <title>iw</title>
    <link rel="stylesheet" type="text/css" href="../../style.css" media="screen">
</head>

<body>

<nav>
    <ul>
        <li><a class="navbar" href="../../index.php">Home</a></li>
        <li><a class="navbar" href="../../documentation.html">Documentation</a></li>
    </ul>
</nav>
            
<div class="content">

<h1>iw</h1>

<p>iw is a new nl80211 based CLI configuration utility for wireless devices. It supports almost all new drivers that have been added to the kernel recently. iw is still under development. Features are added 'as we go'. The only documentation that exists for iw is this page. Please help expand it.
There is a page listing use cases with iwconfig and iw: replacing iwconfig. </p>

<p>Just enter</p>

<pre>iw help</pre>

<p>on your command line and it will print out the commands it supports.</p>

<p>Use the following to get device capabilities for all devices, such as band information (2.4 GHz, and 5 GHz), and 802.11n information:</p>

<pre>iw list</pre>

<h2>Scanning</h2>

<pre>iw dev wlan0 scan</pre>

<h2>Listening to events</h2>

<p>Just use</p>

<pre>iw event</pre>

<p>When debugging, it can be useful to see the auth/assoc/deauth/disassoc frames, use</p>

<pre>iw event -f</pre>

<p>and sometimes timing information is also useful:</pre>

<pre>iw event -t</pre>

<h2>Getting link status</h2>

<p>To determine if you are connected to an AP or not and if you are the last TX rate used you can use the command below.</p>

<p>Example output when associated to a legacy (non-802.11n) AP:</p>

<pre>
iw dev wlan0 link
Connected to 04:21:b0:e8:c8:8b (on wlan0)
        SSID: attwifi
        freq: 2437
        RX: 2272 bytes (18 packets)
        TX: 232 bytes (3 packets)
        signal: -57 dBm
        tx bitrate: 36.0 MBit/s
</pre>

<p>Example output when associated to an 802.11n AP:</p>

<pre>iw dev wlan0 link
Connected to 68:7f:74:3b:b0:01 (on wlan32)
        SSID: tesla-5g-bcm
        freq: 5745
        RX: 30206 bytes (201 packets)
        TX: 4084 bytes (23 packets)
        signal: -31 dBm
        tx bitrate: 300.0 MBit/s MCS 15 40Mhz short GI
</pre>

<p>Example output when not connected to an AP:</p>

<pre>
iw dev wlan0 link
Not connected.
</pre>

<p>This would happen if you are not connected to an AP. To connect to an AP you can use iw connect if the connection requires:</p>

<pre>
    No encryption
    WEP 
</pre>

<h2>Getting station statistics</h2>

<p>To get station statistic information such as the amount of tx/rx bytes, the last TX bitrate (including MCS rate) you can do:</p>

<pre>
$ iw dev wlan1 station dump
Station 12:34:56:78:9a:bc (on wlan0)
        inactive time:  304 ms
        rx bytes:       18816
        rx packets:     75
        tx bytes:       5386
        tx packets:     21
        signal:         -29 dBm
        tx bitrate:     54.0 MBit/s
</pre>
        
<p>If you need to connect to an AP with WPA or WPA2 encryption requirements then you must use wpa_supplicant. </p>

<h2>Getting station statistics against a peer</h2>

<p>If you want to get specific statistics against a peer you station is communicating with you can use the following:</pre>

<pre>sudo iw dev wlan1 station get &lt;peer-MAC-address&gt;

In the case of a STA the above &lt;peer-MAC-address&gt; would be the MAC address of your AP.

Adding interfaces with iw

<p>There are several modes supported. The modes supported are:</p>

<ul>
    <li><p>monitor</p></li>
    <li><p>managed [also station]</p></li>
    <li><p>wds</p></li>
    <li><p>mesh [also mp]</p></li>
    <li><p>ibss [also adhoc]</p></li>
</ul>

<p>To see a description of these please read our modes documentation.</p>

<p>For example to add a monitor interface:</p>

<pre>iw phy phy0 interface add moni0 type monitor</pre>

<p>where you can replace monitor by anything else and moni0 by the interface name, and need to replace phy0 by the PHY name for your hardware (usually phy0 will be correct unless you hotplugged or reloaded any modules.) If your udev is configured incorrectly, the newly created virtual interface may be renamed by it right away, use ip link to list all interfaces.</p>

<p>Note that in case you want to monitor 802.11n you will need to specify channel width (20 or 20/40MHz) and in case of 20/40MHz if the upper or lower channel is being used. To do so you would use:</p>

<pre>iw dev &lt;devname&gt; set freq <freq> [HT20|HT40+|HT40-]

<p>or</p>

<pre>iw phy &lt;phyname&gt; set freq <freq> [HT20|HT40+|HT40-]</pre>

<p>You can also specify channel instead of frequency:</p>

<pre>iw phy &lt;phyname&gt; set channel <channel> [HT20|HT40+|HT40-]

<pre>iw dev <devname> set channel <channel> [HT20|HT40+|HT40-]

To create a new managed mode interface you would use:

<pre>iw phy phy0 interface add wlan10 type managed

Note that the interface is automatically put into AP mode when using hostapd.

Modifying monitor interface flags

You can customize the type of monitor interface you create. This can be very useful for debugging purposes on end user systems. For example suppose you want to help a user you can take advantage of the fact that a monitor interface in mac80211 uses radiotap to pass up to userspace additional data. Say we want to help a user fish out data without affecting the device's performance by setting it it to a full monitor interface an monitor interface with no additional monitor flags can be created as follows:</p>

<pre>iw dev wlan0 interface add fish0 type monitor flags none</pre>

<p>You can then request the user to use tcpdump on a session:</p>

<pre>tcpdump -i fish0 -s 65000 -p -U -w  /tmp/fishing.dump</pre>

The nice thing about these type of alternative monitor interfaces is you can further extend radiotap even with vendor extensions to add more data to radiotap to help debug device specific features.

Keep in mind this requires drivers to honor mac80211's flag requests strictly, so drivers like ath5k and ath9k which still enable flags based on operation mode need to be fixed to take advantage of this.

Monitor flags possible

The following are flags you can specify:</p>

<ul>
    <li><p>none</p></li>
	<li><p>fcsfail</p></li>
	<li><p>plcpfail</p></li>
    <li><p>control</p></li>
	<li><p>otherbss</p></li>
	<li><p>cook</p></li>
</ul>

<h2>Deleting interfaces with iw</h2>

<p>The command line is:</p>

<pre>iw dev moni0 del</pre>

<p>Where "moni0" was the virtual interface interface that was created with the first command</p>

<h2>Virtual vif support</h2>

<p>There is a dedicated section for virtual vif support, see the iw vif page.</p>

<h2>Setting frequency with iw</h2>

<pre>iw dev wlan0 set freq 2412 [HT20|HT40+|HT40-]</pre>

<h2>Setting channel with iw</h2>

<pre>iw dev wlan0 set channel 1 [HT20|HT40+|HT40-]</pre>

<h2>Updating your regulatory domain</h2>

<pre>iw reg set alpha2</pre>

<p>Where "alpha2" is the ISO/IEC 3166 alpha2 country code. The information used and set comes from our regulatory infrastructure.</p>

<p>You can also use the latest wpa_supplicant (as of 0.6.7) now to change your regulatory domain, to do so just add a "COUNTRY=US" entry into your configuration for example.</p>

<h2>Creating and inspecting Mesh Point interfaces with iw</h2>

<p>You may add a mesh interface to drivers that support Mesh Point operation. Mesh Point interfaces have a mesh_id parameter which may be up to 32 bytes long. For example, to add an interface "mesh0" to device phy0 with mesh_id "mymesh",</p>

<pre>iw phy phy0 interface add mesh0 type mp mesh_id mymesh</pre>

<pp>Mesh Point interfaces, by default, are configured on Channel 1. Mesh Point operation begins when the interface is brought up. In the default configuration, Mesh Point interfaces will automatically detect and attempt to create Peer Links with other Mesh Points (peers) having the same mesh ID. Use the station list and station statistics to see the peer list and Peer Link status.</p>

<p>After sending traffic (ex: pinging another mesh node), you may wish to see a list of Mesh Paths:</p>

<pre>iw dev mesh0 mpath dump</pre>

<section>
<a href="comparative_sup.html">&#171; The comparative of superiority</a></p>
<a href="index.html">Index</a>
<a href="peculiaritiescomp.html">Peculiarities of comparatives and superlatives &#187;</a>
</section>

</body>
</html>