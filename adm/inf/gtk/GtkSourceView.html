<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="GtkSourceView"/>
    <title>GtkSourceView</title>
    <link rel="stylesheet" type="text/css" href="../../style.css" media="screen">
</head>

<body>

<nav>
    <ul>
        <li><a class="navbar" href="../../index.html">Home</a></li>
        <li><a class="navbar" href="index.html">Index</a></li>
    </ul>
</nav>

<div class="content">

<h1>GtkSourceView</h1>

<p> GtkSourceView is a GNOME library that extends GtkTextView, the standard GTK+ widget for multiline text editing. GtkSourceView adds support for syntax highlighting, undo/redo, file loading and saving, search and replace, a completion system, printing, displaying line numbers, and other features typical of a source code editor. GtkSourceView is the main class of the GtkSourceView library. Use a GtkSourceBuffer to display text with a GtkSourceView. This class provides:</p>

<ul>
	<li><p>Show the line numbers;</p></li>

	<li><p>Show a right margin;</p></li>

    <li><p>Highlight the current line;</p></li>

    <li><p>Indentation settings;</p></li>

    <li><p>Configuration for the Home and End keyboard keys;</p></li>

    <li><p>Configure and show line marks;</p></li>

    <li><p>And a few other things.</p></li>
</ul>

<h2>Includes</h2>

<pre>#include &lt;gtksourceview/gtksource.h&gt;</pre>

<h2>Functions</h2>

<h4>gtk_source_view_new ()</h4>

<pre>
GtkWidget *
gtk_source_view_new (void);
</pre>

<p>Creates a new GtkSourceView. By default, an empty GtkSourceBuffer will be lazily created and can be retrieved with gtk_text_view_get_buffer(). If you want to specify your own buffer, either override the GtkTextViewClass create_buffer factory method, or use gtk_source_view_new_with_buffer(). Returns a new GtkSourceView.</p>

<h4>gtk_source_view_get_show_line_numbers ()</h4>

<pre>
gboolean
gtk_source_view_get_show_line_numbers (GtkSourceView *view);
</pre>

<h2>Examples</h2>

<pre>
#include &lt;gtk/gtk.h&gt;
#include &lt;gtksourceview/gtksource.h&gt;

void find (GtkTextView *text_view, const gchar *text, GtkTextIter *iter)
{
  GtkTextIter mstart, mend;
  GtkTextBuffer *buffer;
  gboolean found;

  buffer = gtk_text_view_get_buffer (GTK_TEXT_VIEW (text_view));
  found = gtk_text_iter_forward_search (iter, text, 0, &mstart, &mend, NULL);

  if (found)
    {
      gtk_text_buffer_select_range (buffer, &mstart, &mend);
      gtk_text_buffer_create_mark (buffer, "last_pos", &mend, FALSE);
    }
}

typedef struct App 
{
  GtkWidget *source_view;
  GtkWidget *search_entry;
} App;

/* Called when main window is destroyed. */
void
win_destroy (void)
{
  gtk_main_quit();
}

void
next_button_clicked (GtkWidget *next_button, App *app)
{
  const gchar *text;
  GtkTextBuffer *buffer;
  GtkTextMark *last_pos;
  GtkTextIter iter;

  text = gtk_entry_get_text (GTK_ENTRY (app->search_entry));
  
  buffer = gtk_text_view_get_buffer (GTK_TEXT_VIEW (app->source_view));

  last_pos = gtk_text_buffer_get_mark (buffer, "last_pos");
  if (last_pos == NULL)
    return;

  gtk_text_buffer_get_iter_at_mark (buffer, &iter, last_pos);
  find (GTK_TEXT_VIEW (app->source_view), text, &iter);
}

/* Called when search button is clicked. */
void
search_button_clicked (GtkWidget *search_button, App *app)
{
  const gchar *text;
  GtkTextBuffer *buffer;
  GtkTextIter iter;

  text = gtk_entry_get_text (GTK_ENTRY (app->search_entry));

  buffer = gtk_text_view_get_buffer (GTK_TEXT_VIEW (app->source_view));
  gtk_text_buffer_get_start_iter (buffer, &iter);
  
  find (GTK_TEXT_VIEW (app->source_view), text, &iter);
}

int 
main (int argc, char *argv[])
{
  GtkWidget *win;
  GtkWidget *vbox;
  GtkWidget *hbox;
  GtkWidget *search_button;
  GtkWidget *next_button;
  GtkWidget *swindow;
  GtkCssProvider *provider;
  GtkStyleContext *context;
  
  App app;

  gtk_init (&argc, &argv);

  /* Create a window with a search entry, search button and a text
     area. */
  win = gtk_window_new (GTK_WINDOW_TOPLEVEL);
  g_signal_connect (G_OBJECT (win), "destroy", win_destroy, NULL);

  vbox = gtk_box_new (GTK_ORIENTATION_VERTICAL,0);
  gtk_container_add (GTK_CONTAINER (win), vbox);

  hbox = gtk_box_new (GTK_ORIENTATION_HORIZONTAL,0);
  
  gtk_container_add(GTK_CONTAINER (vbox), hbox);
  
  app.search_entry = gtk_entry_new ();
  
  search_button = gtk_button_new_with_label ("Search");
  next_button = gtk_button_new_with_label ("Next");
  
  gtk_container_add(GTK_CONTAINER (hbox), app.search_entry);
  gtk_container_add(GTK_CONTAINER (hbox), search_button);
  gtk_container_add(GTK_CONTAINER (hbox), next_button);

  g_signal_connect (G_OBJECT (search_button), "clicked", 
                    G_CALLBACK (search_button_clicked), &app);
  g_signal_connect (G_OBJECT (next_button), "clicked",
                    G_CALLBACK (next_button_clicked), &app);
                    
  /* A scrolled window which automatically displays horizontal and
     vertical scrollbars when the text exceeds the text view's size. */
  swindow = gtk_scrolled_window_new (NULL, NULL);
  
  gtk_scrolled_window_set_policy (GTK_SCROLLED_WINDOW (swindow),
                                  GTK_POLICY_AUTOMATIC,
                                  GTK_POLICY_AUTOMATIC);

  gtk_widget_set_vexpand (swindow, TRUE);
  
  gtk_container_add(GTK_CONTAINER (vbox), swindow);

  app.source_view = gtk_source_view_new ();
  
  provider = gtk_css_provider_new ();
  gtk_css_provider_load_from_data (provider,
		"textview{"
		"font-size: 30px;"
		"font-family: serif;"
	 	"} text{"
		"color: green;"
	    "background: black;"
	 	"}",	 	
	 	-1,
		 NULL);

  context = gtk_widget_get_style_context (app.source_view);
  gtk_style_context_add_provider (context,
	GTK_STYLE_PROVIDER (provider),
	GTK_STYLE_PROVIDER_PRIORITY_APPLICATION);
  gtk_container_add (GTK_CONTAINER (swindow), app.source_view);
  
  gtk_source_view_set_show_line_numbers (GTK_SOURCE_VIEW((app.source_view)), TRUE);

  gtk_widget_show_all (win);

  gtk_main();
}

</pre>

<section aria-label="End">
<a href="alkynes.html.html">&#171;Alkynes: general properties</a>
<a href="index.html">Index</a>
<a href="GtkSourceStyleSchemeManager.html">GtkSourceStyleSchemeManager&#187;</a>
</section>

</div>

</body>
</html>
